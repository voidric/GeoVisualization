# 三维地质数据可视化系统

## 1. 项目简介
本项目是一个基于 WebGL (Three.js) 技术构建的高性能三维地质数据可视化平台。该系统提供一个直观、交互性强的在线分析环境，支持对地形数据（GeoTIFF）和地震数据（SEGY）进行三维重建、切片分析及属性查看。

系统采用轻量化架构，无需后台服务器即可在浏览器端直接解析git和渲染大规模地质数据，并提供丰富的可视化调节工具，如自定义色阶、等值线叠加、实时数据探针等。

## 2. 核心功能

### 2.1 地形可视化
*   **数据支持**: 加载和解析 GeoTIFF (.tif) 格式的高程数据。
*   **三维重建**: 基于网格的高精度三维地形渲染，支持 Z 轴夸张 (0.1x - 100x) 实时调节。
*   **色彩映射**: 提供多种配色方案及自定义三色渐变配置。
*   **等值线分析**: 支持在地表叠加实时等高线，可动态调整等高距。
*   **数据统计**: 悬浮直方图实时显示当前视域内的高程数据分布。

### 2.2 地震可视化
*   **数据支持**: 支持标准的 SEGY (.sgy, .segy) 二进制地震数据文件加载。
*   **模拟数据**: 内置基于平滑褶皱模型的模拟数据，用于功能演示和测试。
*   **多样化显示**:
    *   **变密度显示**: 使用颜色深浅表达振幅强度。
    *   **变面积显示**: 经典的波形曲线显示，支持增益调节。
*   **三维切片**: 支持纵测线、横测线、时间切片的自由滑动观测。
*   **体渲染**: 支持基于点云阈值过滤的三维地震体可视化，直观展示内部构造。

### 2.3 交互与工具
*   **数据探针**: 鼠标悬停实时显示世界坐标 (X, Y) 及对应的数据值 (Z/Amplitude)。
*   **一键截图**: 支持将当前分析视图保存为高清 PNG 图片。
*   **辅助视图**: 可切换三维空间网格和坐标轴显示。
*   **自适应布局**: 界面控件根据当前所选模式自动切换，保持操作简洁。

## 3. 技术栈
*   **前端框架**: Vite + Vanilla JavaScript (ES6+)
*   **渲染引擎**: Three.js (WebGL)
*   **界面组件**: lil-gui
*   **数据解析**:
    *   `geotiff.js`: 处理 GeoTIFF 影像数据。
    *   `SegyLoader.js` : 处理 SEGY 地震数据二进制流。

## 4. 本地部署

### 4.1 环境要求
*   Node.js (推荐 v14.0 以上)
*   现代浏览器 (Chrome, Edge, Firefox 等支持 WebGL 的浏览器)

### 4.2 安装运行
1.  **克隆或下载项目代码**
2.  **安装依赖**
    ```bash
    npm install
    ```
3.  **启动开发服务器**
    ```bash
    npm run dev
    ```
4.  **访问系统**

## 5. 项目结构
```
GeoVisSystem/
├── src/
│   ├── loaders/        # 数据加载器
│   │   ├── DemLoader.js    # GeoTIFF 解析
│   │   └── SegyLoader.js   # SEGY 解析
│   ├── objects/        # 可视化对象封装
│   │   ├── TerrainMesh.js  # 地形网格
│   │   ├── SeismicSlice.js # 地震切片
│   │   ├── SeismicBody.js  # 地震体
│   │   └── SeismicWiggle.js# 地震波形
│   ├── utils/          # 工具类
│   │   ├── ColorSchemes.js # 配色方案定义
│   │   ├── MockLoader.js   # 模拟数据生成
│   │   ├── Histogram.js    # 直方图组件
│   │   └── MouseProbe.js   # 鼠标探针
│   ├── main.js         # 主程序入口 (逻辑控制)
│   ├── scene.js        # 场景初始化 (Scene, Camera, Renderer)
│   └── style.css       # 样式文件
├── public/             # 静态资源 (示例数据)
├── index.html          # 页面入口
└── package.json        # 项目配置
```

## 6. 操作指南
1.  **切换模式**: 使用右上角的“切换系统”下拉框在“地形可视化”和“地震可视化”之间切换。
2.  **加载数据**:
    *   在控制面板点击“📂 导入...”按钮选择本地文件。
    *   或点击“模拟数据”快速加载测试模型。
3.  **调整视角**:
    *   **左键拖拽**: 旋转视角。
    *   **中键按住**: 平移视图。
    *   **滚轮**: 缩放。
